From c44069c10a4a9c696910baf0dbbefc41528f6dbe Mon Sep 17 00:00:00 2001
From: Lubomir Rintel <lkundrak@v3.sk>
Date: Mon, 10 Aug 2015 14:07:45 +0200
Subject: device: avoid setting MTU to zero if undefined


diff --git a/src/devices/nm-device.c b/src/devices/nm-device.c
index 06d8ba9..88f63c1 100644
--- a/src/devices/nm-device.c
+++ b/src/devices/nm-device.c
@@ -4648,7 +4648,7 @@ nm_device_set_mtu (NMDevice *self, guint32 mtu)
 	if (priv->ip6_mtu)
 		nm_device_ipv6_set_mtu (self, priv->ip6_mtu);
 
-	if (priv->mtu != nm_platform_link_get_mtu (NM_PLATFORM_GET, ifindex))
+	if (priv->mtu && priv->mtu != nm_platform_link_get_mtu (NM_PLATFORM_GET, ifindex))
 		nm_platform_link_set_mtu (NM_PLATFORM_GET, ifindex, priv->mtu);
 }
 
-- 
cgit v0.10.2

